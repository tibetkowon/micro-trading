{% if orders %}
<div class="table-wrap">
<table>
    <thead>
        <tr>
            <th>#</th>
            <th>종목</th>
            <th>구분</th>
            <th>수량</th>
            <th>체결가</th>
            <th>상태</th>
            <th>수수료</th>
            <th>출처</th>
            <th>시간(KST)</th>
        </tr>
    </thead>
    <tbody>
        {% for o in orders %}
        <tr>
            <td>{{ o.id }}</td>
            <td>
                <strong>{{ name_map.get((o.symbol, o.market), o.symbol) if name_map else o.symbol }}</strong>
                <small style="color:var(--text-muted);">{{ o.symbol }}</small>
            </td>
            <td class="{{ 'buy-side' if o.side == 'BUY' else 'sell-side' }}">{{ "매수" if o.side == "BUY" else "매도" }}</td>
            <td>{{ o.filled_quantity or o.quantity }}</td>
            <td>
                {% if o.status == 'FILLED' and o.filled_price and o.filled_price > 0 %}
                    {{ "{:,.0f}".format(o.filled_price) }}
                {% else %}
                    -
                {% endif %}
            </td>
            <td>
                {% if o.status == 'FILLED' %}
                    <span class="badge badge-filled">체결완료</span>
                {% elif o.status == 'PENDING' %}
                    <span class="badge badge-pending">대기중</span>
                {% elif o.status == 'CANCELLED' %}
                    <span class="badge badge-cancelled">취소</span>
                {% elif o.status == 'REJECTED' %}
                    <span class="badge badge-rejected">거부</span>
                {% else %}
                    <span class="badge badge-pending">{{ o.status }}</span>
                {% endif %}
            </td>
            <td>
              {% if o.status == 'FILLED' %}
                {{ "{:,.0f}".format(commission_map.get(o.id, 0)) }}원
              {% else %}
                -
              {% endif %}
            </td>
            <td>{{ o.source | source_label }}</td>
            <td>{{ o.created_at | to_kst }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% else %}
<p class="empty-state">주문 내역이 없습니다.</p>
{% endif %}

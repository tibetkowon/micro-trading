{% if results %}
<div class="wl-search-count">검색 결과 {{ results|length }}건</div>
<ul class="wl-list">
{% for item in results %}
<li class="wl-item wl-search-item">
    <div class="wl-item-info"
         hx-get="/partials/stock-detail/{{ item.symbol }}?market={{ item.market }}&name={{ item.name | urlencode }}"
         hx-target="#panel-main"
         hx-swap="innerHTML"
         hx-push-url="/stock/{{ item.symbol }}?market={{ item.market }}"
         onclick="markSelected(this.parentElement); clearSearch();"
         style="cursor:pointer;">
        <div class="wl-item-name">
            {%- if q and item.match_type != 'chosung' -%}
                {{ item.name | replace(q, '<b>' ~ q ~ '</b>') | replace(q | lower, '<b>' ~ q | lower ~ '</b>') | safe }}
            {%- else -%}
                {{ item.name }}
            {%- endif -%}
            {% if item.match_type == 'chosung' %}<span class="wl-match-tag">초성</span>{% endif %}
        </div>
        <div class="wl-item-symbol">{{ item.symbol }} &middot; {{ item.market }}</div>
    </div>
    <button class="wl-add-btn"
            hx-post="/stocks/memo"
            hx-vals='{"symbol":"{{ item.symbol }}","market":"{{ item.market }}","name":"{{ item.name }}"}'
            hx-swap="none"
            hx-on::after-request="this.textContent='✓'; this.disabled=true;"
            title="관심종목에 추가">+</button>
</li>
{% endfor %}
</ul>
{% elif q %}
<div class="wl-empty">검색 결과가 없습니다.</div>
{% endif %}

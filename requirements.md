## Project 개요(Overview)
- 목적: 저사양 주식거래 트레이딩 서비스
- 핵심가치: 저사양 환경 최적화, 주요종목 추천, 실시간 시세반영, 직관적 자산관리

## 기능 (Functional Requirements)
- 우선순위는 낮을수록 높음 - 최고 0
- 기능 개발 후에는 적용여부에 'O' 추가
| ID   | 우선순위 | 기능명       | 상세 내용                                                                 | 적용 여부 |
|:-----|:----------|:-------------|:-------------------------------------------------------------------------|:-----------|
| F-01 | 0         | 종목검색기   | 종목의 코드/명 등을 검색하여 종목 검색                                   | O          |
| F-02 | 0         | 종목 저장    | 검색한 종목을 저장하여 관리                                              | O          |
| F-03 | 0         | 시세 수집기   | 실시간 주요종목 및 저장된 종목의 시장가를 API를 통해 가져온다 (30초 간격 갱신) | O          |
| F-04 | 0         | 가상 지갑    | 초기자산을 .env 파일에 설정된 만큼 지급 및 거래 시 자산 업데이트        | O          |
| F-05 | 0         | 거래 엔진    | 실시간 시장가를 기준으로 주문 처리, 수수료 반영 (.env 관리, 기본 0.05%) | O          |
| F-06 | 1         | 대시보드     | 실시간 자산 및 추천 종목/저장 종목의 실시간 시장가 노출                 | O          |
| F-07 | 2         | 실제 계좌연동 | 실제 자산으로 거래를 위한 연동 (KIS 한국투자증권)                       | O          |
| F-08 | 9         | 알람         | Discord 채널을 통한 거래 내역 및 가격 도달 알람 발송                    |            |
| F-09 | 9         | 자동거래     | AI 연동을 통한 자동 거래 시스템                                          |            |
| F-10 | 9         | 거래 보고서   | 직접 거래 및 AI 거래 후 일일 보고서 Discord 통해 보고                   |            |

## 비기능 (Non-Functional Requirements)
- 성능: NCP Micro(RAM 1GB)에서 OOM(Out of Memory) 없이 24시간 구동.
- 데이터: SQLite를 사용하여 별도의 DB 서버 없이 로컬 파일로 관리.
- 보안: API Key 등 민감 정보는 .env 파일을 통해 관리하고 깃허브 노출 금지.

## 마일스톤 (Implementation Phases)
| Phase | 상태 | 내용 |
|:---|:---|:---|
| Phase 1 | **완료** | 데이터 모델 설계 및 구현 (Account/WatchlistItem/PriceCache/Trade 리팩토링, FK 인덱스, PRAGMA 최적화) |
| Phase 2 | **완료** | 실시간 시장가 API 연동 (3계층 캐시: 메모리→API→DB, PriceCache 영속화, 30초 스케줄러) |
| Phase 3 | **완료** | 가상 거래 로직 구현 (잔고검증, 수수료 계산, KRW/USD 통화 구분, 포지션 업데이트, 테스트 7건) |
| Phase 4 | **완료** | 웹 대시보드 설계 및 구현 (자산현황 6카드, 현금잔고 표시, 관심종목 실시간 시세 카드그리드, 포트폴리오 사이드바 개선) |
| Phase 5 | **완료** | 웹 거래화면 설계 및 구현 (검색→워치리스트 추가, 주문 잔고/예상금액 표시, 실시간 가격 연동) |
| Phase 6 | **완료** | 서버 배포 자동화 (CI 테스트→배포→헬스체크, Docker 멀티스테이지 빌드) |
| Phase 7 | **완료** | 웹 화면 개선 및 정리 - 메뉴정리, 미사용화면 제거, 사용 화면 메뉴노출, footer 정리 |
| Phase 8 | **완료** | 종목 검색기능 개선 - pykrx KRX 전종목 DB 동기화, S&P500 전종목 하드코딩, 초성 검색, 검색 정렬(exact>prefix>contains) |
| Phase 9 | **완료** | 실계좌 연동 관리 — 설정 페이지, KIS API 연결 테스트, 계좌 잔고 조회 |
| Phase 10 | **완료** | 실거래/모의투자 런타임 스위칭 — 모드 전환 UI, 확인 다이얼로그, 전환 시 데이터 분리 |
| Phase 11 | **완료** | 종목명 추가 — PriceResponse/OrderResponse/PositionResponse에 name 필드 추가, StockMaster 배치 조회 |
| Phase 12 | **완료** | 지표 자동 계산 — GET /market/price/{symbol} 응답에 ma5/ma20 추가, asyncio.gather 병렬 계산 |
| Phase 13 | **완료** | 정밀잔고 — PortfolioSummary에 orderable_krw/orderable_usd 추가 (잔고 / (1 + 수수료율)) |
| Phase 14 | **완료** | 주문실패사유 상세화 — Order 모델 reject_reason 컬럼 추가, OrderResponse에 노출, 자동 마이그레이션 |
| Phase 15 | **완료** | 분봉 데이터 — GET /market/candles/{symbol}?interval=1\|5, KIS 분봉 API 연동, 5분봉 서버사이드 집계 | 
| Phase 16 | **완료** | 자금 관리 고도화 — 실질 주문 가능 금액(수수료 0.3% 반영) 계산 로직 구현 및 AI용 API 제공         |
| Phase 17 | **완료** | 주문 안정성 강화 — KIS API 토큰 자동 갱신 보완 및 주문 실패 시 서버 레벨 재시도(Retry) 메커니즘 구축 |
| Phase 18 | 진행 대기 | 주문 옵션 다변화 — 현재가 기반 '지정가' 주문 기능 추가 및 AI 선택 로직 연동                    |
| Phase 19 | 진행 대기 | 수익률 분석 시스템 — 일일 누적 수익률 및 종목별 실현 손익 요약 API/UI 구현                    |
| Phase 20 | 진행 대기 | 최근거래  개선 - 최근주문내역의 종목에 종목명 노출, 가격 0원 고정노출됨, 출처 manual 불분명함 필요 없는 필드일 가능성 있음, 거래시간 KST 로 노출 |
| Phase 21 | 진행 대기 | 매뉴 및 미사용 화면 정리 - 전략 기능 미사용, 화면별 메뉴목록 상이함 통일 필요 |
| Phase 22 | 진행 대기 | 계좌정보 개선 - 실계좌의 예수, 총평가금액 외의 주문가능금액 추가 | 

